@model IEnumerable<BTDLab2.Models.Character>
@using BTDLab2.Models;
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@{ 
    var Son = Model.Where(o => o.Role.Name == "Son");
    var Doc = Model.Where(o => o.Role.Name == "Doctor");
    var Mom = Model.Where(o => o.Role.Name == "Mama");

    var MomNeed = Mom.Where(o => o.Id == ViewBag.Mom).ToList();
    var SonNeed = Son.Where(o=>o.Id == ViewBag.Son).ToList();
    var DocNeed = Doc.Where(o=>o.Id == ViewBag.Doc).ToList();

    if ( (SonNeed.Count+MomNeed.Count+DocNeed.Count) != 3)
    {
        // TODO: вызов преставления с ошибкой
    }

}
 
        <br>
        <br>
        <a name="up"></a>
        <h1 class="title">Самое интересное слово.</h1>
        @*        <ul class="menu">
            <li> <a href="#start">В начало</a></li>
            <li> <a href="#middle">В середину</a></li>
            <li> <a href="#finish">В конец</a></li>
        </ul>*@
        <div class="maintext">
            <a name="start"></a>
            <img class="img1" src=@Url.Content("~/Content/img/30be9b11d4a0221bc3bbd2316f7474e0.jpg")>
            Каждый раз, когда наступал вечер, <u>@MomNeed[0].Name</u> вздыхала.<br> Почему она вздыхала? Потому что надо было снова укладывать в постель<br> своего сынишку и укачивать,укачивать,
            укачивать…
            <br>
            <u>@SonNeed[0].Name</u> привык, чтобы его укачивали. Иначе он не засыпал. Стоило <u>@MomNeed[0].Name</u> отойти от<br> кроватки — и сразу <u>@SonNeed[0].Name</u> становилось плохо, у него была болезнь: <u>@SonNeed[0].Word.Disease.Name</u>
            <br>Пригласила <u>@MomNeed[0].Name</u> доктора —  <u>@DocNeed[0].Name</u>. Узнал <u>@DocNeed[0].Name</u>, в чём дело,<br> и покачал головой:<br>
            <br> — Тут никакие уколы не помогут. От такой болезни может вылечить только… <br> — Мое слово <u>@MomNeed[0].Word.Name</u>? — спросила <u>@MomNeed[0].Name</u>. <br> — Нет. <br> — <u>Ваше слово @DocNeed[0].Word.Name</u>? <br> — Нет. <br> — Компресс?<br>
            <img class="img2" src=@Url.Content("~/Content/img/dikobrazy.jpg")>
            <a name="middle"></a>
            — Что вы! Вашего <u>@SonNeed[0].Name</u> не спасут никакие компрессы. Но не надо огорчаться. Я уже не раз встречал подобных больных. И все выздоравливали. <br> <br>
            <div class="text1">
                — <u> @DocNeed[0].Name</u>, скорей выписывайте свой чудесный рецепт я посмотрю в нашем <u> @MomNeed[0].Place.Name</u>, а если там нет — и я побегу в <br>
                 вашу <u>@DocNeed[0].Place.Name</u>!
                <br> — В <u>@DocNeed[0].Place.Name</u> идти не придётся. От <u>@SonNeed[0].Word.Disease.Name</u>, которой страдает ваш <u>@SonNeed[0].Name</u>,
                <br> есть одно Слово…
                <br> — Какое <u>Слово</u>? — переспросила взволнованная <u>@MomNeed[0].Name</u>.
                <br> <u>@DocNeed[0].Name</u> ничего не ответил и стал выписывать рецепт.
                <br> — Здесь всё указано, — сказал <u>@DocNeed[0].Name</u> на прощание.
                <br> Когда <u>@DocNeed[0].Name</u> ушёл, мама <u>@MomNeed[0].Name</u> надела очки, заглянула в
                <br> рецепт и прочла одно-единственное слово: — <b><u><i>@SonNeed[0].Word.Name…</i></u></b><br>
            </div>

            <div class="text2">
                Вечером, как обычно, она уложила @SonNeed[0].Name спать, но укачивать не стала.<br> Только маленький <b>@SonNeed[0].Name</b> начинал чуствовать себя плохо, как @MomNeed[0].Name произнесла Слово — <b><u><i>@SonNeed[0].Word.Name</i></u></b><br>
                <br> @SonNeed[0].Name сразу успокоился и спросил:<br> — Что это было? @MomNeed[0].Name, скажи ещё, пожалуйста!<br> И @MomNeed[0].Name стала говорить слово снова и снова. А <u>@SonNeed[0].Name</u> стал постепенно  выздоравливать...
            </div>
            <a name="finish"></a>
        </div>
        <img class="img4" src=@Url.Content("~/Content/img/goodnight.jpg") alt="изображение не найдено">
        <br>
        <font color="red" size=5 align="center">
            <p>
                Источник:
                <a href="https://dobrye-skazki.ru/samoe-interesnoe-slovo.html">Короткие сказки</a>
            </p>
        </font>

        <br>@*
        <a href="#up"><img class="arrow" src=@Url.Content("~/Content/img/arrow.png") alt="изображение не найдено"></a>
*@

        <div class="maintext">
            <br />
            <br />
         <h2 align="center">@Html.ActionLink("Создать персонажа", "Create")</h2>




            @using (Html.BeginForm())
            {
                <p align="center"><input type="submit" value=" Применить персонажей " /></p>
                <table border="10" align="center">

                    <tr>
                        <td>
                            <table class="table">
                                <caption>Таблица роль: Мама</caption>
                                <tr>
                                    <th>

                                    </th>
                                    <th>
                                        Имя
                                    </th>
                                    <th>
                                        Место
                                    </th>
                                    <th>
                                        Cлово
                                    </th>
                                    <th></th>
                                </tr>

                                @foreach (var item in Mom)
                                {
                                    <tr>
                                        <td>
                                            @Html.RadioButton("IdMom", item.Id)
                                            <span></span> <br />
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelitem => item.Name)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.Place.Name)
                                        </td> 
                                        <td>
                                            @Html.DisplayFor(modelItem => item.Word.Name)
                                        </td>
                                        <td>
                                            @Html.ActionLink("Изменить", "Edit", new { id = item.Id })
                                            @Html.ActionLink("Удалить", "Delete", new { id = item.Id })
                                        </td>
                                    </tr>
                                }

                            </table>
                        </td>
                        <td>
                            <table class="table">
                                <caption>Таблица роль: Сын</caption>
                                <tr>
                                    <th>

                                    </th>
                                    <th>
                                        Имя
                                    </th>
                                    <th>
                                        Место
                                    </th>
                                    <th>
                                        Слово
                                    </th>
                                    <th></th>
                                </tr>

                                @foreach (var item in Son)
                                {

                                    <tr>
                                        <td>
                                            @Html.RadioButton("IdSon", item.Id)
                                            <span></span> <br />
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.Name)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.Place.Name)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.Word.Name)
                                        </td>

                                        <td>
                                            @Html.ActionLink("Изменить", "Edit", new { id = item.Id })
                                            @Html.ActionLink("Удалить", "Delete", new { id = item.Id })
                                        </td>
                                    </tr>
                                }

                            </table>
                        </td>

                        <td>
                            <table class="table">
                                <caption>Таблица роль: Доктор</caption>
                                <tr>
                                    <th>

                                    </th>
                                    <th>
                                        Имя
                                    </th>
                                    <th>
                                        Место
                                    </th>
                                    <th>
                                        Слово
                                    </th>

                                    <th></th>
                                </tr>

                                @foreach (var item in Doc)
                                {
                                    <tr>
                                        <td>
                                            @Html.RadioButton("IdDoc", item.Id)
                                            <span></span> <br />
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.Name)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.Place.Name)
                                        </td> 
                                        <td>
                                            @Html.DisplayFor(modelItem => item.Word.Name)
                                        </td>
                                        <td>
                                            @Html.ActionLink("Изменить", "Edit", new { id = item.Id })
                                            @Html.ActionLink("Удалить", "Delete", new { id = item.Id })
                                        </td>
                                    </tr>
                                }


                            </table>
                        </td>
                    </tr>
                </table>
            }
</div>

